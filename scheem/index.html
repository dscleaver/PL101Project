<head>
<title>Scheem Live Test</title>
<script src=
  "http://nathansuniversity.com/js/jquery-1.7.1.min.js">
</script>
<script src="./parser.js"></script>
<script src="./scheem.js"></script>
</head>
<body>
<h2>Scheem</h2>
<p>Welcome to my Scheem implementation. Simply type your Scheem program into
the textarea and press run. The output will be displayed
in the lower area. If you aren't familiar with Scheem check out the <a href="doc.html">documentation</a>.</p>
<h3>Live Test</h3>
Examples: <a href="" onclick="$('#input').val('(begin\n    (define factorial (lambda (x) (if (= x 1) 1 (* x (factorial (- x 1))))))\n    (factorial 5))'); return false;">Factorial</a> <a onclick="$('#input').val('(begin\n;; convert from church numerals to decimal\n    (define plusone (lambda (x) (+ x 1)))\n    (define as-decimal (lambda (n) (n plusone 0)))\n;; a few predefined numbers\n    (define zero (lambda (f x) x))\n    (define one (lambda (f x) (f x)))\n    (define two (lambda (f x) (f (f x))))\n    (define three (lambda (f x) (f (f (f x)))))\n;;+ 1\n    (define succ (lambda (n) (lambda (f x)  (f (n f x)))))\n;; m + n\n    (define plus (lambda (m n) (lambda (f x) (m f (n f x)))))\n;; m * n\n    (define mult (lambda (m n) (lambda (f x) (n (lambda (a) (m f a)) x))))\n;; - 1\n    (define pred (lambda (n)\n                            (lambda (f x)\n                                ((n (lambda (g) (lambda (h) (h (g f)))) (lambda (u) x)) (lambda (u) u)))))\n;; m - n\n    (define sub (lambda (m n) (n pred m)))\n;; should be 7\n    (as-decimal (sub (mult three (plus two one)) two))\n)'); return false;" href="">Church Numerals</a><br>
<textarea id="input" style="width:800px; height:400px;">
(+ 1 2)</textarea>

<input id="submitbutton" type="button" value="Run" />

<div id="console" style="width:800px; height:300px;border:solid 1px;">
  <p>This is where output goes.</p>
</div>

<script>
  // Utility function to log messages
  var log_console = function(msg) {
      $('#console').append('<p>' + msg + '</p>');
  };
  // After page load
  $(function() {
    $('#submitbutton').click(function() {
        var user_text = $('#input').val();
        $('#console').html(''); // clear console
       // log_console('Your input was: "' + user_text + '"');
        try {
            var parsed = parseScheem(user_text);
        //    log_console('Parsed: ' + JSON.stringify(parsed));
            try {
                var result = evalScheem(parsed);
                log_console('Result: ' + prettyPrint(result));
            }
            catch(e) {
                log_console('Eval Error: ' + e);
            }
        }
        catch(e) {
            log_console('Parse Error: ' + e);
        }
    });
  });
</script>

</body>
</html>
